"use strict";(self.webpackChunk_feasibleone_blong_docs=self.webpackChunk_feasibleone_blong_docs||[]).push([[7486],{6812:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>c,frontMatter:()=>a,metadata:()=>d,toc:()=>l});var t=s(9541),r=s(8991);const a={},i="Handler",d={id:"patterns/handler",title:"Handler",description:"Handlers are functions being called by the adapters and orchestrators to",source:"@site/docs/patterns/handler.md",sourceDirName:"patterns",slug:"/patterns/handler",permalink:"/blong-docs/docs/patterns/handler",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/patterns/handler.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Error",permalink:"/blong-docs/docs/patterns/error"},next:{title:"Meta",permalink:"/blong-docs/docs/patterns/meta"}},o={},l=[{value:"Internal handlers",id:"internal-handlers",level:2},{value:"API based handlers",id:"api-based-handlers",level:2},{value:"Library functions",id:"library-functions",level:2},{value:"Folder structure",id:"folder-structure",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",ul:"ul",...(0,r.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"handler",children:"Handler"}),"\n",(0,t.jsxs)(n.p,{children:["Handlers are functions being called by the adapters and orchestrators to\nimplement certain functionality. Handlers can be based on user defined\nAPI or be related to internal logic, for example the\n",(0,t.jsx)(n.a,{href:"../concepts/adapter#adapter-loop",children:"adapter loop"})]}),"\n",(0,t.jsx)(n.h2,{id:"internal-handlers",children:"Internal handlers"}),"\n",(0,t.jsx)(n.p,{children:"The internal handlers have predefined meaning and names and are often related\nto some common integration tasks. They have the following purpose:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"send"}),": prepare the data for sending, adapting it for the underlying protocol.\nThe input data is assumed to be protocol/API independent as much as possible."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"receive"}),": transform the received data to be protocol/API independent and remove\nany data not needed by the rest of the system."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"encode"}),": JavaScript objects passed to this handlers are converted to Buffer,\nwhich is then passed to the network."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"decode"}),": data frames coming from the network as Buffers are passed to this\nhandler and it converts them to JavaScript objects"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"exec"}),": this handler is called by default if no handler is defined for the ",(0,t.jsx)(n.a,{href:"./meta",children:"$meta"}),".method"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ready"}),": this handler is called when the adapter is ready to process calls,\nwhich for some adapters means that connection has been established or\na TCP port was opened for listening."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"idleSend"}),": this handler is called when there has been an idle period\n(longer than the configured) of no outgoing messages. It usually\nsends some kind of echo/keep alive message available in the protocol."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"idleReceive"}),": this handler is called when there has been an idle period\n(longer than the configured) of no incoming messages. It usually disconnects\nthe adapter as the expectations is that the other side is sending some\nkeep alive messages."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"drainSend"}),": this handler is called when the send queue is emptied or has been\nempty for a pre-configured period. It can be used to trigger processing of\nsome pending operations that happen during the idle time of the adapter."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"api-based-handlers",children:"API based handlers"}),"\n",(0,t.jsxs)(n.p,{children:["The API based handlers usually implement some business functionality.\nThey use namespaces to prefix the names of the API methods. The framework\nworks best when the naming convention for the methods uses a\n",(0,t.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Semantic_triple",children:"semantic triple"}),"\nin the format ",(0,t.jsx)(n.code,{children:"subjectObjectPredicate"}),", where:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"subject"})," is the namespace and often is same as the name of the\n",(0,t.jsx)(n.a,{href:"../concepts/realm",children:"realm"})," if the realm defines only one namespace."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"object"})," is often some entity within the realm"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"predicate"})," is the action being executed on the entity"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Here are some examples:"}),"\n",(0,t.jsxs)(n.p,{children:["If we have a realm named ",(0,t.jsx)(n.code,{children:"user"})," that has the goal to implement role based\naccess control, we can imagine it has the following namespaces:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"identity"}),": for implementing the authentication"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"permission"}),": for implementing the authorization"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"user"}),": for managing the users and roles. It could\nhave methods for objects named ",(0,t.jsx)(n.code,{children:"user"})," and ",(0,t.jsx)(n.code,{children:"role"}),", for example:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"userUserAdd"})," - for creating users"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"userRoleEdit"})," - for editing roles"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"library-functions",children:"Library functions"}),"\n",(0,t.jsx)(n.p,{children:"The library functions implement some reusable functionality, that\nis repeated across some of the handlers within the same realm.\nAny handler, that has a name that does not match the internal handlers\nor the API namespaces is considered to be a library function and is not\nexposed anywhere else, except to the sibling handlers."}),"\n",(0,t.jsx)(n.h2,{id:"folder-structure",children:"Folder structure"}),"\n",(0,t.jsx)(n.p,{children:"The handlers and library functions are grouped together and given a name.\nThis happens by defining them in a sub-folder within the realm folder.\nThe most common approach is to create a separate file for each handler and\nuse the handler name as file name. This serves multiple reasons:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"allow fast finding of handlers within code editors. For example\nin VSCode ctrl+p and then typing the first letters of the semantic\ntriple will bring the desired handler (i.e. ctrl+p uua is likely to find userUserAdd)"}),"\n",(0,t.jsx)(n.li,{children:"easier code review by avoiding files with thousands of rows and a lot of nesting"}),"\n",(0,t.jsx)(n.li,{children:"better isolation between the handlers"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["The group name is in the format ",(0,t.jsx)(n.code,{children:"realmname.foldername"}),".\nThis name is then used in the ",(0,t.jsx)(n.code,{children:"imports"})," property in the adapters and orchestrators."]})]})}function c(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},8991:(e,n,s)=>{s.d(n,{Z:()=>d,a:()=>i});var t=s(3981);const r={},a=t.createContext(r);function i(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);