"use strict";(self.webpackChunk_feasibleone_blong_docs=self.webpackChunk_feasibleone_blong_docs||[]).push([[4791],{8662:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>d});var a=t(9541),i=t(8991);const r={},s="Validation",o={id:"patterns/validation",title:"Validation",description:"Validation definitions are used for:",source:"@site/docs/patterns/validation.md",sourceDirName:"patterns",slug:"/patterns/validation",permalink:"/blong-docs/docs/patterns/validation",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Test",permalink:"/blong-docs/docs/patterns/test"}},l={},d=[{value:"Automatic",id:"automatic",level:2},{value:"Manual",id:"manual",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"validation",children:"Validation"}),"\n",(0,a.jsx)(n.p,{children:"Validation definitions are used for:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"preparing the API documentation"}),"\n",(0,a.jsx)(n.li,{children:"validation of parameters"}),"\n",(0,a.jsx)(n.li,{children:"constructing responses"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Validations can be automatically derived from types defined\nfor the handler parameters and result or can be manually specified."}),"\n",(0,a.jsx)(n.h2,{id:"automatic",children:"Automatic"}),"\n",(0,a.jsx)(n.p,{children:"For automatic definitions the following is required:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Put a file named ",(0,a.jsx)(n.code,{children:"~.schema.ts"})," in the folder where the handlers are defined.\nThis file is automatically updated when it's date is older than another\nfile within the folder, where interface ",(0,a.jsx)(n.code,{children:"ISchema"})," is defined."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Define the interface ",(0,a.jsx)(n.code,{children:"ISchema"})," for each handler that will use automatic\nvalidations. Here is an example how it must be defined:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"\nimport {IMeta, handler} from '@feasibleone/blong';\n\ninterface ISchema { // this must be on a separate line\n    /** @description \"description of parameter\" */\n    params: object;\n    /** @description \"description of result\" */\n    result: number;\n} // this must be on a separate line\n\nexport default handler(() =>\n  function subjectObjectPredicate(\n      params: ISchema['params'],\n      $meta: IMeta\n  ): ISchema['result'] {\n      // implementation\n  }\n);\n"})}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"manual",children:"Manual"}),"\n",(0,a.jsxs)(n.p,{children:["To define validations manually, put them in a subfolder\nof the ",(0,a.jsx)(n.code,{children:"gateway"})," layer and use the ",(0,a.jsx)(n.code,{children:"validation"})," function from the\nframework. The framework will provide access to the\n",(0,a.jsx)(n.a,{href:"https://github.com/sinclairzx81/typebox",children:"TypeBox"})," API\nvia the ",(0,a.jsx)(n.code,{children:"lib.type"})," property."]}),"\n",(0,a.jsx)(n.p,{children:"Here is an example:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"// realmname/gateway/subject/subjectObjectPredicate.ts\nimport {validation} from '@feasibleone/blong';\n\nexport default validation(({lib: {type}}) =>\n    function subjectObjectPredicate() {\n        return {\n            // as minimum, define the types of params and result\n            params: type.Any(),\n            result: type.Any(),\n            // some optional overrides\n            auth: false,                // turn off authentication\n            description: 'description', // set the description for docs\n            method: 'GET',              // the default is POST\n            path: '/some/path',         // change the path\n        };\n    }\n);\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8991:(e,n,t)=>{t.d(n,{Z:()=>o,a:()=>s});var a=t(3981);const i={},r=a.createContext(i);function s(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);